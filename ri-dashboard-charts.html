<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>RI Real Estate Dashboard</title>
    <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            background: #0f172a; 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            padding: 1rem;
        }
        .grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
        }
        .chart-card {
            background: #1e293b;
            border-radius: 12px;
            padding: 1rem;
            border: 1px solid rgba(255,255,255,0.1);
        }
        .chart-title {
            color: #e2e8f0;
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }
        @media (max-width: 768px) {
            .grid { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <div class="grid">
        <div class="chart-card">
            <div class="chart-title">üìä Price Distribution</div>
            <div id="priceDist"></div>
        </div>
        <div class="chart-card">
            <div class="chart-title">üí∞ Price per Sq Ft by City (Top 12)</div>
            <div id="ppsf"></div>
        </div>
        <div class="chart-card">
            <div class="chart-title">üè† Property Type Breakdown</div>
            <div id="types"></div>
        </div>
        <div class="chart-card">
            <div class="chart-title">‚è±Ô∏è Days on Market by Price Range</div>
            <div id="dom"></div>
        </div>
    </div>

    <script>
        const darkBg = '#0f172a';
        const cardBg = '#1e293b';
        const colors = ['#67e8f9', '#34d399', '#4ade80', '#fbbf24', '#fb923c', '#a78bfa', '#f472b6'];
        
        const layoutBase = {
            paper_bgcolor: 'rgba(0,0,0,0)',
            plot_bgcolor: cardBg,
            font: { color: '#94a3b8', size: 11 },
            margin: { l: 50, r: 20, t: 20, b: 50 },
            showlegend: false
        };

        // 1. Price Distribution
        Plotly.newPlot('priceDist', [{
            type: 'bar',
            x: ['<$300K', '$300-400K', '$400-500K', '$500-600K', '$600-750K', '$750K-1M', '$1M+'],
            y: [4490, 7599, 7767, 5294, 4723, 3339, 2944],
            marker: { 
                color: colors,
                line: { width: 0 }
            },
            hovertemplate: '%{x}: %{y:,} properties<extra></extra>'
        }], {
            ...layoutBase,
            xaxis: { gridcolor: 'rgba(255,255,255,0.05)', tickangle: -30 },
            yaxis: { gridcolor: 'rgba(255,255,255,0.05)', title: 'Properties' }
        }, { responsive: true, displayModeBar: false });

        // 2. Price per Sq Ft by City (horizontal)
        const cities = ['East Side Of Prov.', 'Middletown', 'Wakefield', 'Charlestown', 'S. Kingstown', 
                       'Little Compton', 'Narragansett', 'Newport', 'Point Judith', 'Jamestown', 
                       'New Shoreham', 'Block Island'];
        const ppsf = [429, 440, 441, 470, 482, 520, 562, 651, 656, 745, 781, 1005];
        
        Plotly.newPlot('ppsf', [{
            type: 'bar',
            y: cities,
            x: ppsf,
            orientation: 'h',
            marker: { 
                color: ppsf.map((v, i) => `hsl(${160 + i*8}, 70%, 55%)`),
                line: { width: 0 }
            },
            text: ppsf.map(v => '$' + v),
            textposition: 'outside',
            textfont: { color: '#94a3b8', size: 10 },
            hovertemplate: '%{y}: $%{x}/sqft<extra></extra>'
        }], {
            ...layoutBase,
            margin: { l: 110, r: 50, t: 10, b: 30 },
            xaxis: { gridcolor: 'rgba(255,255,255,0.05)', title: '$/sqft' },
            yaxis: { gridcolor: 'rgba(255,255,255,0.05)' }
        }, { responsive: true, displayModeBar: false });

        // 3. Property Type Donut
        Plotly.newPlot('types', [{
            type: 'pie',
            labels: ['Single Family', 'Condo/Co-op', 'Multi-Family (2-4)', 'Vacant Land', 'Other', 'Multi-Family (5+)'],
            values: [23368, 6042, 4957, 1015, 355, 233],
            hole: 0.55,
            marker: { colors: ['#a78bfa', '#67e8f9', '#34d399', '#fbbf24', '#94a3b8', '#f472b6'] },
            textinfo: 'percent',
            textfont: { color: '#e2e8f0', size: 11 },
            hovertemplate: '%{label}: %{value:,} (%{percent})<extra></extra>'
        }], {
            ...layoutBase,
            margin: { l: 20, r: 20, t: 20, b: 20 },
            annotations: [{
                text: '<b>36,156</b><br>Total',
                x: 0.5, y: 0.5,
                font: { size: 14, color: '#e2e8f0' },
                showarrow: false
            }]
        }, { responsive: true, displayModeBar: false });

        // 4. Days on Market
        Plotly.newPlot('dom', [{
            type: 'bar',
            x: ['<$300K', '$300-500K', '$500-750K', '$750K-1M', '$1M+'],
            y: [74, 52, 54, 54, 85],
            marker: { 
                color: ['#67e8f9', '#34d399', '#4ade80', '#fbbf24', '#a78bfa'],
                line: { width: 0 }
            },
            text: [74, 52, 54, 54, 85].map(v => v + ' days'),
            textposition: 'outside',
            textfont: { color: '#94a3b8', size: 11 },
            hovertemplate: '%{x}: %{y} days avg<extra></extra>'
        }], {
            ...layoutBase,
            xaxis: { gridcolor: 'rgba(255,255,255,0.05)' },
            yaxis: { gridcolor: 'rgba(255,255,255,0.05)', title: 'Avg Days', range: [0, 100] }
        }, { responsive: true, displayModeBar: false });
    </script>
</body>
</html>
