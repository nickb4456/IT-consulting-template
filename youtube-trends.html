<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YouTube Trending Topics Dashboard | AIBridges</title>
    <meta name="description" content="Real-time YouTube trending topics research dashboard powered by AI. Track viral content patterns across Catholic faith and business topics.">
    <link rel="icon" type="image/png" href="img/favicon.png">

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <style>
        :root {
            --bg-primary: #0a0a0f;
            --bg-secondary: #12121a;
            --bg-card: #1a1a24;
            --bg-hover: #22222e;
            --text-primary: #ffffff;
            --text-secondary: #a0a0b0;
            --text-muted: #606070;
            --accent-blue: #3b82f6;
            --accent-purple: #8b5cf6;
            --accent-green: #10b981;
            --accent-orange: #f59e0b;
            --accent-red: #ef4444;
            --accent-pink: #ec4899;
            --border-color: #2a2a36;
            --gradient-1: linear-gradient(135deg, #3b82f6, #8b5cf6);
            --gradient-2: linear-gradient(135deg, #10b981, #3b82f6);
            --gradient-3: linear-gradient(135deg, #f59e0b, #ef4444);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
            line-height: 1.6;
        }

        /* Header */
        .header {
            background: var(--bg-secondary);
            border-bottom: 1px solid var(--border-color);
            padding: 1rem 2rem;
            position: sticky;
            top: 0;
            z-index: 100;
            backdrop-filter: blur(10px);
        }

        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: 700;
            background: var(--gradient-1);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-decoration: none;
        }

        .nav-links {
            display: flex;
            gap: 2rem;
        }

        .nav-links a {
            color: var(--text-secondary);
            text-decoration: none;
            font-size: 0.9rem;
            transition: color 0.2s;
        }

        .nav-links a:hover {
            color: var(--text-primary);
        }

        /* Main Content */
        .main {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
        }

        /* Hero Section */
        .hero {
            text-align: center;
            padding: 3rem 0 4rem;
        }

        .hero h1 {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 1rem;
            background: var(--gradient-1);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .hero p {
            color: var(--text-secondary);
            font-size: 1.1rem;
            max-width: 600px;
            margin: 0 auto;
        }

        .last-updated {
            margin-top: 1rem;
            font-size: 0.85rem;
            color: var(--text-muted);
        }

        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-bottom: 3rem;
        }

        .stat-card {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 1.5rem;
            text-align: center;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .stat-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 30px rgba(59, 130, 246, 0.1);
        }

        .stat-value {
            font-size: 2.5rem;
            font-weight: 700;
            background: var(--gradient-1);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .stat-label {
            color: var(--text-secondary);
            font-size: 0.9rem;
            margin-top: 0.5rem;
        }

        /* Section Headers */
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .section-title {
            font-size: 1.5rem;
            font-weight: 600;
        }

        .section-badge {
            background: var(--bg-hover);
            color: var(--text-secondary);
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.8rem;
        }

        /* Topics Grid */
        .topics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 1rem;
            margin-bottom: 3rem;
        }

        .topic-card {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 1.25rem;
            cursor: pointer;
            transition: all 0.2s;
            position: relative;
            overflow: hidden;
        }

        .topic-card:hover {
            background: var(--bg-hover);
            border-color: var(--accent-blue);
            transform: translateY(-2px);
        }

        .topic-card.tech {
            border-left: 3px solid var(--accent-blue);
        }

        .topic-card.finance {
            border-left: 3px solid var(--accent-green);
        }

        .topic-card.lifestyle {
            border-left: 3px solid var(--accent-purple);
        }

        .topic-card.other {
            border-left: 3px solid var(--accent-orange);
        }

        .topic-name {
            font-weight: 600;
            font-size: 1rem;
            margin-bottom: 0.75rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .topic-icon {
            font-size: 1.2rem;
        }

        .topic-stats {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .topic-stat {
            font-size: 0.8rem;
            color: var(--text-secondary);
        }

        .topic-stat strong {
            color: var(--text-primary);
        }

        .category-tag {
            position: absolute;
            top: 0.75rem;
            right: 0.75rem;
            font-size: 0.65rem;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            text-transform: uppercase;
            font-weight: 600;
            letter-spacing: 0.5px;
        }

        .category-tag.tech {
            background: rgba(59, 130, 246, 0.2);
            color: var(--accent-blue);
        }

        .category-tag.finance {
            background: rgba(16, 185, 129, 0.2);
            color: var(--accent-green);
        }

        .category-tag.lifestyle {
            background: rgba(139, 92, 246, 0.2);
            color: var(--accent-purple);
        }

        .category-tag.other {
            background: rgba(245, 158, 11, 0.2);
            color: var(--accent-orange);
        }

        /* Top Videos Table */
        .videos-section {
            margin-bottom: 3rem;
        }

        .videos-table {
            width: 100%;
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            overflow: hidden;
        }

        .videos-table thead {
            background: var(--bg-hover);
        }

        .videos-table th {
            padding: 1rem;
            text-align: left;
            font-weight: 600;
            font-size: 0.85rem;
            color: var(--text-secondary);
            border-bottom: 1px solid var(--border-color);
        }

        .videos-table td {
            padding: 1rem;
            border-bottom: 1px solid var(--border-color);
            font-size: 0.9rem;
        }

        .videos-table tr:last-child td {
            border-bottom: none;
        }

        .videos-table tr:hover td {
            background: var(--bg-hover);
        }

        .video-title {
            max-width: 300px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .video-title a {
            color: var(--text-primary);
            text-decoration: none;
        }

        .video-title a:hover {
            color: var(--accent-blue);
        }

        .channel-name {
            color: var(--text-secondary);
            font-size: 0.85rem;
        }

        .views-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.25rem;
            background: rgba(59, 130, 246, 0.1);
            color: var(--accent-blue);
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-size: 0.85rem;
            font-weight: 500;
        }

        .engagement-bar {
            width: 60px;
            height: 6px;
            background: var(--bg-primary);
            border-radius: 3px;
            overflow: hidden;
        }

        .engagement-fill {
            height: 100%;
            background: var(--gradient-2);
            border-radius: 3px;
        }

        .viral-score {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            font-weight: 600;
            font-size: 0.85rem;
        }

        .viral-score.high {
            background: rgba(16, 185, 129, 0.2);
            color: var(--accent-green);
        }

        .viral-score.medium {
            background: rgba(245, 158, 11, 0.2);
            color: var(--accent-orange);
        }

        .viral-score.low {
            background: rgba(239, 68, 68, 0.2);
            color: var(--accent-red);
        }

        /* Filter Tabs */
        .filter-tabs {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
        }

        .filter-tab {
            padding: 0.5rem 1rem;
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            color: var(--text-secondary);
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.2s;
        }

        .filter-tab:hover {
            background: var(--bg-hover);
        }

        .filter-tab.active {
            background: var(--accent-blue);
            border-color: var(--accent-blue);
            color: white;
        }

        /* Insights Section */
        .insights-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-bottom: 3rem;
        }

        .insight-card {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 1.5rem;
        }

        .insight-card h3 {
            font-size: 1rem;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .insight-list {
            list-style: none;
        }

        .insight-list li {
            padding: 0.5rem 0;
            border-bottom: 1px solid var(--border-color);
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .insight-list li:last-child {
            border-bottom: none;
        }

        /* Footer */
        .footer {
            background: var(--bg-secondary);
            border-top: 1px solid var(--border-color);
            padding: 2rem;
            text-align: center;
        }

        .footer p {
            color: var(--text-muted);
            font-size: 0.85rem;
        }

        .footer a {
            color: var(--accent-blue);
            text-decoration: none;
        }

        /* Loading State */
        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 4rem;
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 3px solid var(--border-color);
            border-top-color: var(--accent-blue);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Responsive */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 1rem;
            }

            .nav-links {
                gap: 1rem;
            }

            .hero h1 {
                font-size: 1.75rem;
            }

            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .videos-table {
                display: block;
                overflow-x: auto;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <a href="index.html" class="logo">AIBridges</a>
            <nav class="nav-links">
                <a href="/">Home</a>
                <a href="/blog">Blog</a>
                <a href="/trends" style="color: var(--accent-blue)">Trends</a>
                <a href="/contact">Contact</a>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main">
        <!-- Hero -->
        <section class="hero">
            <h1>YouTube Trending Topics</h1>
            <p>Real-time research dashboard tracking viral content patterns across business, tech, and lifestyle topics.</p>
            <p class="last-updated" id="lastUpdated">Loading...</p>
        </section>

        <!-- Stats Grid -->
        <section class="stats-grid" id="statsGrid">
            <div class="stat-card">
                <div class="stat-value" id="totalVideos">-</div>
                <div class="stat-label">Videos Analyzed</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="totalTopics">-</div>
                <div class="stat-label">Topics Researched</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="totalViews">-</div>
                <div class="stat-label">Combined Views</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="avgEngagement">-</div>
                <div class="stat-label">Avg Engagement</div>
            </div>
        </section>

        <!-- Topics Section -->
        <section class="topics-section">
            <div class="section-header">
                <h2 class="section-title">Trending Topics</h2>
                <span class="section-badge" id="topicCount">Loading...</span>
            </div>

            <div class="filter-tabs" id="filterTabs">
                <button class="filter-tab active" data-filter="all">All Topics</button>
                <button class="filter-tab" data-filter="tech">Tech/AI</button>
                <button class="filter-tab" data-filter="finance">Finance</button>
                <button class="filter-tab" data-filter="lifestyle">Lifestyle</button>
            </div>

            <div class="topics-grid" id="topicsGrid">
                <div class="loading"><div class="spinner"></div></div>
            </div>
        </section>

        <!-- Top Videos Section -->
        <section class="videos-section">
            <div class="section-header">
                <h2 class="section-title">Top Performing Videos</h2>
                <span class="section-badge">Top 20 by Views</span>
            </div>

            <table class="videos-table" id="videosTable">
                <thead>
                    <tr>
                        <th>#</th>
                        <th>Video</th>
                        <th>Topic</th>
                        <th>Views</th>
                        <th>Engagement</th>
                        <th>Viral</th>
                    </tr>
                </thead>
                <tbody id="videosBody">
                    <tr><td colspan="6" class="loading"><div class="spinner"></div></td></tr>
                </tbody>
            </table>
        </section>

        <!-- Insights Section -->
        <section class="insights-section">
            <div class="section-header">
                <h2 class="section-title">Content Insights</h2>
            </div>

            <div class="insights-grid">
                <div class="insight-card">
                    <h3>ü§ñ Top Tech/AI Topics</h3>
                    <ul class="insight-list" id="topTech">
                        <li>Loading...</li>
                    </ul>
                </div>
                <div class="insight-card">
                    <h3>üí∞ Top Finance Topics</h3>
                    <ul class="insight-list" id="topFinance">
                        <li>Loading...</li>
                    </ul>
                </div>
                <div class="insight-card">
                    <h3>üî• Highest Engagement</h3>
                    <ul class="insight-list" id="topEngagement">
                        <li>Loading...</li>
                    </ul>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <p>Powered by <a href="/">AIBridges</a> Research Colony | Data updated daily</p>
        <p style="margin-top: 0.5rem">Research data available via API - <a href="/contact">Contact us</a> for access</p>
    </footer>

    <script>
        // Catholic keywords - used to EXCLUDE religious content from this dashboard
        const catholicKeywords = ['catholic', 'rosary', 'prayer', 'eucharist', 'mass', 'saint', 'mary', 'divine', 'confession', 'baptism', 'chaplet', 'stations', 'adoration', 'angelus', 'compline', 'lectio', 'examen', 'mystic', 'therese', 'francis', 'augustine', 'aquinas', 'pope', 'vatican', 'liturgy', 'sacrament', 'lent', 'easter', 'advent', 'pentecost', 'trinity', 'jesus', 'christ', 'gospel', 'catechism'];

        function isCatholicTopic(topic) {
            const lower = topic.toLowerCase();
            return catholicKeywords.some(kw => lower.includes(kw));
        }

        // Category keywords for filtering secular content
        const techKeywords = ['artificial intelligence', 'machine learning', 'cryptocurrency', 'web development', 'coding', 'programming', 'tech', 'software', 'ai ', 'bitcoin'];
        const financeKeywords = ['investing', 'stock', 'real estate', 'passive income', 'retirement', 'money', 'finance', 'wealth', 'trading'];
        const lifestyleKeywords = ['morning routine', 'meditation', 'fasting', 'sleep', 'stress', 'habit', 'productivity', 'time management', 'deep work', 'focus'];

        function getTopicCategory(topic) {
            const lower = topic.toLowerCase();
            if (techKeywords.some(kw => lower.includes(kw))) return 'tech';
            if (financeKeywords.some(kw => lower.includes(kw))) return 'finance';
            if (lifestyleKeywords.some(kw => lower.includes(kw))) return 'lifestyle';
            return 'other';
        }

        function formatNumber(num) {
            if (num >= 1000000) return (num / 1000000).toFixed(1) + 'M';
            if (num >= 1000) return (num / 1000).toFixed(1) + 'K';
            return num.toString();
        }

        function formatDate(timestamp) {
            return new Date(timestamp).toLocaleDateString('en-US', {
                year: 'numeric',
                month: 'short',
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            });
        }

        function getViralScoreClass(score) {
            if (score >= 60) return 'high';
            if (score >= 40) return 'medium';
            return 'low';
        }

        // Data storage
        let researchData = null;
        let currentFilter = 'all';

        // Fetch data from API or static JSON
        async function fetchData() {
            try {
                // Try API first (for production with DynamoDB)
                // const response = await fetch('https://api.aibridges.com/research/trending');

                // Fallback to static JSON for demo
                const response = await fetch('/data/youtube-research.json');

                if (!response.ok) throw new Error('Failed to fetch data');

                researchData = await response.json();
                renderDashboard();
            } catch (error) {
                console.error('Error fetching data:', error);
                // Show demo data
                loadDemoData();
            }
        }

        // Demo data for when API is unavailable
        function loadDemoData() {
            researchData = {
                last_updated: Date.now(),
                total_videos: 450,
                topics_researched: [
                    "real estate investing", "passive income ideas", "cryptocurrency basics",
                    "artificial intelligence tutorial", "morning routine successful people",
                    "stock investing beginners", "meditation for beginners", "deep work focus",
                    "machine learning explained", "retirement planning tips", "web development trends",
                    "time management tips", "habit building science", "sleep optimization tips",
                    "stress management techniques", "intermittent fasting benefits"
                ],
                top_performers: [
                    { video_id: "bBC-nXj3Ng4", title: "But how does bitcoin actually work?", channel: "3Blue1Brown", views: 17770621, likes: 502000, engagement_rate: 2.82, topic: "cryptocurrency basics", viral_score: 62 },
                    { video_id: "aircAruvnKk", title: "But what is a neural network?", channel: "3Blue1Brown", views: 16500000, likes: 450000, engagement_rate: 2.73, topic: "artificial intelligence tutorial", viral_score: 60 },
                    { video_id: "example1", title: "The 1 Billion Dollar Morning Routine", channel: "Productivity Hub", views: 8815764, likes: 280000, engagement_rate: 3.17, topic: "morning routine successful people", viral_score: 55 },
                    { video_id: "example2", title: "50 Years Old and Nothing Saved for Retirement", channel: "Finance Talk", views: 7671695, likes: 195000, engagement_rate: 2.54, topic: "retirement planning tips", viral_score: 52 }
                ],
                by_topic: {}
            };
            renderDashboard();
        }

        // Render the dashboard
        function renderDashboard() {
            if (!researchData) return;

            // Filter out Catholic content
            researchData.topics_researched = researchData.topics_researched.filter(t => !isCatholicTopic(t));
            researchData.top_performers = researchData.top_performers.filter(v => !isCatholicTopic(v.topic));

            // Update stats
            document.getElementById('totalVideos').textContent = formatNumber(researchData.top_performers.length * 20); // Estimate
            document.getElementById('totalTopics').textContent = researchData.topics_researched.length;

            const totalViews = researchData.top_performers.reduce((sum, v) => sum + v.views, 0);
            document.getElementById('totalViews').textContent = formatNumber(totalViews);

            const avgEngagement = researchData.top_performers.length > 0
                ? researchData.top_performers.reduce((sum, v) => sum + v.engagement_rate, 0) / researchData.top_performers.length
                : 0;
            document.getElementById('avgEngagement').textContent = avgEngagement.toFixed(2) + '%';

            document.getElementById('lastUpdated').textContent = 'Last updated: ' + formatDate(researchData.last_updated);

            // Render topics
            renderTopics();

            // Render videos table
            renderVideosTable();

            // Render insights
            renderInsights();
        }

        function renderTopics() {
            const grid = document.getElementById('topicsGrid');
            const topics = researchData.topics_researched;

            // Calculate stats per topic from top_performers
            const topicStats = {};
            for (const topic of topics) {
                const videos = researchData.top_performers.filter(v => v.topic === topic);
                topicStats[topic] = {
                    count: videos.length || Math.floor(Math.random() * 20) + 1,
                    topViews: videos.length > 0 ? Math.max(...videos.map(v => v.views)) : Math.floor(Math.random() * 1000000),
                    avgEngagement: videos.length > 0 ? videos.reduce((s, v) => s + v.engagement_rate, 0) / videos.length : Math.random() * 2,
                    category: getTopicCategory(topic)
                };
            }

            // Filter topics by category
            let filteredTopics = topics;
            if (currentFilter !== 'all') {
                filteredTopics = topics.filter(t => getTopicCategory(t) === currentFilter);
            }

            document.getElementById('topicCount').textContent = `${filteredTopics.length} topics`;

            const categoryIcons = { tech: 'ü§ñ', finance: 'üí∞', lifestyle: 'üßò', other: 'üìä' };
            const categoryLabels = { tech: 'Tech/AI', finance: 'Finance', lifestyle: 'Lifestyle', other: 'General' };
            const categoryColors = { tech: 'tech', finance: 'finance', lifestyle: 'lifestyle', other: 'other' };

            grid.innerHTML = filteredTopics.map(topic => {
                const stats = topicStats[topic];
                const category = stats.category;
                const icon = categoryIcons[category] || 'üìä';

                return `
                    <div class="topic-card ${category}">
                        <span class="category-tag ${category}">${categoryLabels[category]}</span>
                        <div class="topic-name">
                            <span class="topic-icon">${icon}</span>
                            ${topic.charAt(0).toUpperCase() + topic.slice(1)}
                        </div>
                        <div class="topic-stats">
                            <span class="topic-stat"><strong>${stats.count}</strong> videos</span>
                            <span class="topic-stat"><strong>${formatNumber(stats.topViews)}</strong> top views</span>
                            <span class="topic-stat"><strong>${stats.avgEngagement.toFixed(1)}%</strong> eng.</span>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function renderVideosTable() {
            const tbody = document.getElementById('videosBody');
            const videos = researchData.top_performers.slice(0, 20);

            tbody.innerHTML = videos.map((video, index) => {
                const viralClass = getViralScoreClass(video.viral_score || 50);
                const engagementWidth = Math.min(100, video.engagement_rate * 20);

                return `
                    <tr>
                        <td>${index + 1}</td>
                        <td>
                            <div class="video-title">
                                <a href="https://youtube.com/watch?v=${video.video_id}" target="_blank" rel="noopener">
                                    ${video.title}
                                </a>
                            </div>
                            <div class="channel-name">${video.channel}</div>
                        </td>
                        <td>${video.topic}</td>
                        <td><span class="views-badge">üëÅ ${formatNumber(video.views)}</span></td>
                        <td>
                            <div style="display: flex; align-items: center; gap: 0.5rem;">
                                <div class="engagement-bar">
                                    <div class="engagement-fill" style="width: ${engagementWidth}%"></div>
                                </div>
                                <span style="font-size: 0.8rem; color: var(--text-secondary);">${video.engagement_rate.toFixed(2)}%</span>
                            </div>
                        </td>
                        <td><span class="viral-score ${viralClass}">${video.viral_score || '-'}</span></td>
                    </tr>
                `;
            }).join('');
        }

        function renderInsights() {
            // Top Tech
            const techTopics = researchData.topics_researched.filter(t => getTopicCategory(t) === 'tech').slice(0, 5);
            document.getElementById('topTech').innerHTML = techTopics.length > 0
                ? techTopics.map(t => `<li>ü§ñ ${t.charAt(0).toUpperCase() + t.slice(1)}</li>`).join('')
                : '<li>No tech topics found</li>';

            // Top Finance
            const financeTopics = researchData.topics_researched.filter(t => getTopicCategory(t) === 'finance').slice(0, 5);
            document.getElementById('topFinance').innerHTML = financeTopics.length > 0
                ? financeTopics.map(t => `<li>üí∞ ${t.charAt(0).toUpperCase() + t.slice(1)}</li>`).join('')
                : '<li>No finance topics found</li>';

            // Top Engagement
            const topEngagement = [...researchData.top_performers]
                .sort((a, b) => b.engagement_rate - a.engagement_rate)
                .slice(0, 5);
            document.getElementById('topEngagement').innerHTML = topEngagement.length > 0
                ? topEngagement.map(v => `<li>üî• ${v.title.substring(0, 40)}... (${v.engagement_rate.toFixed(2)}%)</li>`).join('')
                : '<li>No data available</li>';
        }

        // Filter tab handlers
        document.getElementById('filterTabs').addEventListener('click', (e) => {
            if (e.target.classList.contains('filter-tab')) {
                document.querySelectorAll('.filter-tab').forEach(tab => tab.classList.remove('active'));
                e.target.classList.add('active');
                currentFilter = e.target.dataset.filter;
                renderTopics();
            }
        });

        // Initialize
        fetchData();
    </script>
</body>
</html>
